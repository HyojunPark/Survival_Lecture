<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Add Health Project | SOC6280: Survival Analysis: Practice</title>
  <meta name="description" content="Survival handbook" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Add Health Project | SOC6280: Survival Analysis: Practice" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Survival handbook" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Add Health Project | SOC6280: Survival Analysis: Practice" />
  
  <meta name="twitter:description" content="Survival handbook" />
  

<meta name="author" content="Hyojun Park" />


<meta name="date" content="2023-09-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="more-topics-on-survival-models.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.0/leaflet.js"></script>
<script src="libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script>
<script src="libs/Leaflet.Sync-0.0.5/L.Map.Sync.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.29/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Survival Analysis Workbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About</a></li>
<li class="chapter" data-level="2" data-path="bias-assessment.html"><a href="bias-assessment.html"><i class="fa fa-check"></i><b>2</b> Bias assessment</a>
<ul>
<li class="chapter" data-level="2.1" data-path="bias-assessment.html"><a href="bias-assessment.html#bias-due-to-omitted-confounders"><i class="fa fa-check"></i><b>2.1</b> Bias due to omitted confounders</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="bias-assessment.html"><a href="bias-assessment.html#gold-standard"><i class="fa fa-check"></i><b>2.1.1</b> Gold standard</a></li>
<li class="chapter" data-level="2.1.2" data-path="bias-assessment.html"><a href="bias-assessment.html#misspecified-model-a-confounder-c-was-omitted-from-the-model"><i class="fa fa-check"></i><b>2.1.2</b> Misspecified model: a confounder, <span class="math inline">\(C\)</span>, was omitted from the model</a></li>
<li class="chapter" data-level="2.1.3" data-path="bias-assessment.html"><a href="bias-assessment.html#bias-away-from-or-towards-to-the-null"><i class="fa fa-check"></i><b>2.1.3</b> Bias “away from” or “towards to” the null?</a></li>
<li class="chapter" data-level="2.1.4" data-path="bias-assessment.html"><a href="bias-assessment.html#a-c-is-not-a-confounder-on-x-and-y"><i class="fa fa-check"></i><b>2.1.4</b> A <span class="math inline">\(C\)</span> is not a confounder on <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></a></li>
<li class="chapter" data-level="2.1.5" data-path="bias-assessment.html"><a href="bias-assessment.html#correct-model-specification-without-c"><i class="fa fa-check"></i><b>2.1.5</b> Correct model specification: Without <span class="math inline">\(C\)</span></a></li>
<li class="chapter" data-level="2.1.6" data-path="bias-assessment.html"><a href="bias-assessment.html#misspecified-model-with-c"><i class="fa fa-check"></i><b>2.1.6</b> Misspecified model with <span class="math inline">\(C\)</span></a></li>
<li class="chapter" data-level="2.1.7" data-path="bias-assessment.html"><a href="bias-assessment.html#a-c-is-a-colloder-on-x-and-y"><i class="fa fa-check"></i><b>2.1.7</b> A <span class="math inline">\(C\)</span> is a colloder on <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></a></li>
<li class="chapter" data-level="2.1.8" data-path="bias-assessment.html"><a href="bias-assessment.html#correct-model-specification-without-c-1"><i class="fa fa-check"></i><b>2.1.8</b> Correct model specification: Without <span class="math inline">\(C\)</span></a></li>
<li class="chapter" data-level="2.1.9" data-path="bias-assessment.html"><a href="bias-assessment.html#misspecified-model-with-c-1"><i class="fa fa-check"></i><b>2.1.9</b> Misspecified model with <span class="math inline">\(C\)</span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="bias-assessment.html"><a href="bias-assessment.html#overadjustment-bias"><i class="fa fa-check"></i><b>2.2</b> Overadjustment bias</a></li>
<li class="chapter" data-level="2.3" data-path="bias-assessment.html"><a href="bias-assessment.html#total-effect"><i class="fa fa-check"></i><b>2.3</b> Total effect</a></li>
<li class="chapter" data-level="2.4" data-path="bias-assessment.html"><a href="bias-assessment.html#overadjustment"><i class="fa fa-check"></i><b>2.4</b> Overadjustment</a></li>
<li class="chapter" data-level="2.5" data-path="bias-assessment.html"><a href="bias-assessment.html#logistic-models"><i class="fa fa-check"></i><b>2.5</b> Logistic models</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="bias-assessment.html"><a href="bias-assessment.html#sex-as-a-confounder-c"><i class="fa fa-check"></i><b>2.5.1</b> Sex as a Confounder, <span class="math inline">\(C\)</span></a></li>
<li class="chapter" data-level="2.5.2" data-path="bias-assessment.html"><a href="bias-assessment.html#sex-as-a-moderator-m"><i class="fa fa-check"></i><b>2.5.2</b> Sex as a Moderator, <span class="math inline">\(M\)</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html"><i class="fa fa-check"></i><b>3</b> Survival Analyses: Introduction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#set-packages-and-library"><i class="fa fa-check"></i><b>3.1</b> Set packages and library</a></li>
<li class="chapter" data-level="3.2" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#dataset"><i class="fa fa-check"></i><b>3.2</b> dataset</a></li>
<li class="chapter" data-level="3.3" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#nonparametric-estimation"><i class="fa fa-check"></i><b>3.3</b> Nonparametric estimation</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#data-for-nonparametric-models"><i class="fa fa-check"></i><b>3.3.1</b> Data for nonparametric models</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#kaplan-meier-estimator"><i class="fa fa-check"></i><b>3.3.2</b> Kaplan-Meier estimator</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#nelson-aalen-estimator"><i class="fa fa-check"></i><b>3.3.3</b> Nelson-Aalen estimator</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#comparisons-by-groups"><i class="fa fa-check"></i><b>3.3.4</b> Comparisons by groups</a></li>
<li class="chapter" data-level="3.3.5" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#better-km-figures"><i class="fa fa-check"></i><b>3.3.5</b> Better KM figures</a></li>
<li class="chapter" data-level="3.3.6" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#nonparametric-models-using-a-child-dataset-from-eha"><i class="fa fa-check"></i><b>3.3.6</b> Nonparametric models using a <span class="math inline">\(child\)</span> dataset from eha</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#proportional-hazards-and-cox-regression"><i class="fa fa-check"></i><b>3.4</b> Proportional Hazards and Cox Regression</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#a-visual-check-for-a-proportionality-assumption"><i class="fa fa-check"></i><b>3.4.1</b> A visual check for a proportionality assumption</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#parametric-estimation"><i class="fa fa-check"></i><b>3.5</b> Parametric estimation</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#weibull-model"><i class="fa fa-check"></i><b>3.5.1</b> Weibull model</a></li>
<li class="chapter" data-level="3.5.2" data-path="survival-analyses-introduction.html"><a href="survival-analyses-introduction.html#gompertz-model"><i class="fa fa-check"></i><b>3.5.2</b> Gompertz model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="counting-process.html"><a href="counting-process.html"><i class="fa fa-check"></i><b>4</b> Counting Process</a>
<ul>
<li class="chapter" data-level="4.1" data-path="counting-process.html"><a href="counting-process.html#set-packages-and-library-1"><i class="fa fa-check"></i><b>4.1</b> Set packages and library</a></li>
<li class="chapter" data-level="4.2" data-path="counting-process.html"><a href="counting-process.html#example"><i class="fa fa-check"></i><b>4.2</b> Example</a></li>
<li class="chapter" data-level="4.3" data-path="counting-process.html"><a href="counting-process.html#practice-addhealth-public-datasets"><i class="fa fa-check"></i><b>4.3</b> Practice: AddHealth Public datasets</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="counting-process.html"><a href="counting-process.html#generate-a-complete-framework-with-aid-and-wave-optional"><i class="fa fa-check"></i><b>4.3.1</b> Generate a complete framework with <em>AID</em> and <em>wave</em> (Optional)</a></li>
<li class="chapter" data-level="4.3.2" data-path="counting-process.html"><a href="counting-process.html#time-variant-variables-from-each-wave"><i class="fa fa-check"></i><b>4.3.2</b> Time-variant variables from each wave</a></li>
<li class="chapter" data-level="4.3.3" data-path="counting-process.html"><a href="counting-process.html#time-invariant"><i class="fa fa-check"></i><b>4.3.3</b> Time-invariant</a></li>
<li class="chapter" data-level="4.3.4" data-path="counting-process.html"><a href="counting-process.html#merging-datasets"><i class="fa fa-check"></i><b>4.3.4</b> Merging datasets</a></li>
<li class="chapter" data-level="4.3.5" data-path="counting-process.html"><a href="counting-process.html#define-event-enter-and-exit"><i class="fa fa-check"></i><b>4.3.5</b> Define <em>event</em>, <em>enter</em>, and <em>exit</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html"><i class="fa fa-check"></i><b>5</b> Survival models: specification, estimation, and interpretation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#nonparametric-models"><i class="fa fa-check"></i><b>5.1</b> Nonparametric models</a></li>
<li class="chapter" data-level="5.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#semi-parametric-models-cox-regression"><i class="fa fa-check"></i><b>5.2</b> Semi-parametric models: Cox Regression</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification"><i class="fa fa-check"></i><b>5.2.1</b> Model specification</a></li>
<li class="chapter" data-level="5.2.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation"><i class="fa fa-check"></i><b>5.2.2</b> Estimation</a></li>
<li class="chapter" data-level="5.2.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretations"><i class="fa fa-check"></i><b>5.2.3</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#logistic-regression"><i class="fa fa-check"></i><b>5.3</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification-1"><i class="fa fa-check"></i><b>5.3.1</b> Model specification</a></li>
<li class="chapter" data-level="5.3.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation-1"><i class="fa fa-check"></i><b>5.3.2</b> Estimation</a></li>
<li class="chapter" data-level="5.3.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretation"><i class="fa fa-check"></i><b>5.3.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#linear-regression"><i class="fa fa-check"></i><b>5.4</b> Linear regression</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification-2"><i class="fa fa-check"></i><b>5.4.1</b> Model specification</a></li>
<li class="chapter" data-level="5.4.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation-2"><i class="fa fa-check"></i><b>5.4.2</b> Estimation</a></li>
<li class="chapter" data-level="5.4.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretation-1"><i class="fa fa-check"></i><b>5.4.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#weibull-model-1"><i class="fa fa-check"></i><b>5.5</b> Weibull model</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification-3"><i class="fa fa-check"></i><b>5.5.1</b> Model specification</a></li>
<li class="chapter" data-level="5.5.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation-3"><i class="fa fa-check"></i><b>5.5.2</b> Estimation</a></li>
<li class="chapter" data-level="5.5.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretations-1"><i class="fa fa-check"></i><b>5.5.3</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#exponential-model"><i class="fa fa-check"></i><b>5.6</b> Exponential model</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification-4"><i class="fa fa-check"></i><b>5.6.1</b> Model specification</a></li>
<li class="chapter" data-level="5.6.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation-4"><i class="fa fa-check"></i><b>5.6.2</b> Estimation</a></li>
<li class="chapter" data-level="5.6.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretations-2"><i class="fa fa-check"></i><b>5.6.3</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#gompertz-model-1"><i class="fa fa-check"></i><b>5.7</b> Gompertz model</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#model-specification-5"><i class="fa fa-check"></i><b>5.7.1</b> Model specification</a></li>
<li class="chapter" data-level="5.7.2" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#estimation-5"><i class="fa fa-check"></i><b>5.7.2</b> Estimation</a></li>
<li class="chapter" data-level="5.7.3" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#interpretations-3"><i class="fa fa-check"></i><b>5.7.3</b> Interpretations</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="survival-models-specification-estimation-and-interpretation.html"><a href="survival-models-specification-estimation-and-interpretation.html#graphs"><i class="fa fa-check"></i><b>5.8</b> Graphs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html"><i class="fa fa-check"></i><b>6</b> Cox Proportional Hazard Modeling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#setup-working-datasets"><i class="fa fa-check"></i><b>6.1</b> Setup working datasets</a></li>
<li class="chapter" data-level="6.2" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#cox-proportional-hazard-models-example"><i class="fa fa-check"></i><b>6.2</b> Cox Proportional Hazard Models: Example</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#cox-model-specification"><i class="fa fa-check"></i><b>6.2.1</b> Cox model specification</a></li>
<li class="chapter" data-level="6.2.2" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#model-1-no-covariates"><i class="fa fa-check"></i><b>6.2.2</b> Model 1: No covariates</a></li>
<li class="chapter" data-level="6.2.3" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#model-2-categorical-covariate-region"><i class="fa fa-check"></i><b>6.2.3</b> Model 2: Categorical covariate: region</a></li>
<li class="chapter" data-level="6.2.4" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#model-3-continuous-covariate-imr.birth"><i class="fa fa-check"></i><b>6.2.4</b> Model 3: Continuous covariate: imr.birth</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#interpretation-2"><i class="fa fa-check"></i><b>6.3</b> Interpretation</a></li>
<li class="chapter" data-level="6.4" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#proportional-hazard-ph-assumption"><i class="fa fa-check"></i><b>6.4</b> Proportional hazard (PH) assumption</a></li>
<li class="chapter" data-level="6.5" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#extended-cox-model"><i class="fa fa-check"></i><b>6.5</b> Extended Cox model</a></li>
<li class="chapter" data-level="6.6" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#evaluating-the-proportional-hazard-ph-assumption"><i class="fa fa-check"></i><b>6.6</b> Evaluating the Proportional hazard (PH) assumption</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#graphical-evaluation"><i class="fa fa-check"></i><b>6.6.1</b> Graphical evaluation</a></li>
<li class="chapter" data-level="6.6.2" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#goodness-of-fit-gof"><i class="fa fa-check"></i><b>6.6.2</b> Goodness-of-fit (GOF)</a></li>
<li class="chapter" data-level="6.6.3" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#time-dependent-variable-approaches"><i class="fa fa-check"></i><b>6.6.3</b> Time-dependent variable approaches</a></li>
<li class="chapter" data-level="6.6.4" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#testing-for-influential-observations"><i class="fa fa-check"></i><b>6.6.4</b> Testing for Influential Observations</a></li>
<li class="chapter" data-level="6.6.5" data-path="cox-proportional-hazard-modeling.html"><a href="cox-proportional-hazard-modeling.html#testing-for-non-linearlity"><i class="fa fa-check"></i><b>6.6.5</b> Testing for Non-linearlity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html"><i class="fa fa-check"></i><b>7</b> Accounting for Heterogeneity</a>
<ul>
<li class="chapter" data-level="7.1" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#setup-working-datasets-1"><i class="fa fa-check"></i><b>7.1</b> Setup working datasets</a></li>
<li class="chapter" data-level="7.2" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#an-introductory-example"><i class="fa fa-check"></i><b>7.2</b> An introductory Example</a></li>
<li class="chapter" data-level="7.3" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#working-with-heterogeneity"><i class="fa fa-check"></i><b>7.3</b> Working with heterogeneity</a></li>
<li class="chapter" data-level="7.4" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#stratification"><i class="fa fa-check"></i><b>7.4</b> Stratification</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#generalized-stratified-models"><i class="fa fa-check"></i><b>7.4.1</b> Generalized stratified models</a></li>
<li class="chapter" data-level="7.4.2" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#group_by-analysis-dplyr"><i class="fa fa-check"></i><b>7.4.2</b> <code>group_by</code> analysis (<code>dplyr</code>)</a></li>
<li class="chapter" data-level="7.4.3" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#strata-in-coxph"><i class="fa fa-check"></i><b>7.4.3</b> <code>strata</code> in <code>coxph</code></a></li>
<li class="chapter" data-level="7.4.4" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#strata-in-coxph-with-interaction-terms"><i class="fa fa-check"></i><b>7.4.4</b> <code>strata</code> in <code>coxph</code> with interaction terms</a></li>
<li class="chapter" data-level="7.4.5" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#weibull-ph-models-with-or-without-stratification"><i class="fa fa-check"></i><b>7.4.5</b> Weibull PH models with or without stratification</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#frailty-models"><i class="fa fa-check"></i><b>7.5</b> Frailty models</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#simple-frailty-model"><i class="fa fa-check"></i><b>7.5.1</b> Simple Frailty Model</a></li>
<li class="chapter" data-level="7.5.2" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#shared-frailty-model"><i class="fa fa-check"></i><b>7.5.2</b> Shared Frailty Model</a></li>
<li class="chapter" data-level="7.5.3" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#cox-model-specification-1"><i class="fa fa-check"></i><b>7.5.3</b> Cox model specification</a></li>
<li class="chapter" data-level="7.5.4" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#mixed-effects-cox-model-specification"><i class="fa fa-check"></i><b>7.5.4</b> Mixed effects Cox model specification</a></li>
<li class="chapter" data-level="7.5.5" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#models-without-considering-fraility"><i class="fa fa-check"></i><b>7.5.5</b> Models without considering fraility</a></li>
<li class="chapter" data-level="7.5.6" data-path="accounting-for-heterogeneity.html"><a href="accounting-for-heterogeneity.html#coxme-package-for-frailty-models"><i class="fa fa-check"></i><b>7.5.6</b> <code>coxme</code> package for frailty models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html"><i class="fa fa-check"></i><b>8</b> More Topics on Survival Models</a>
<ul>
<li class="chapter" data-level="8.1" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#setup-working-datasets-2"><i class="fa fa-check"></i><b>8.1</b> Setup working datasets</a></li>
<li class="chapter" data-level="8.2" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#why-we-call-cox-model-as-semi-parametric-model"><i class="fa fa-check"></i><b>8.2</b> Why we call Cox model as semi-parametric model?</a></li>
<li class="chapter" data-level="8.3" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#why-the-cox-ph-model-is-so-popular"><i class="fa fa-check"></i><b>8.3</b> Why the Cox PH model is so popular</a></li>
<li class="chapter" data-level="8.4" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#adjusted-survival-curves-using-the-cox-ph-model"><i class="fa fa-check"></i><b>8.4</b> Adjusted Survival Curves using the Cox PH model</a></li>
<li class="chapter" data-level="8.5" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#survival-model-selection"><i class="fa fa-check"></i><b>8.5</b> Survival model selection</a></li>
<li class="chapter" data-level="8.6" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#likelihood-and-partial-likelihood"><i class="fa fa-check"></i><b>8.6</b> Likelihood and partial likelihood</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#estimation-of-the-cox-ph-model-using-maximum-likelihood-ml"><i class="fa fa-check"></i><b>8.6.1</b> Estimation of the Cox PH model using Maximum likelihood (ML)</a></li>
<li class="chapter" data-level="8.6.2" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#more-about-hazard-ratio"><i class="fa fa-check"></i><b>8.6.2</b> More about Hazard ratio</a></li>
<li class="chapter" data-level="8.6.3" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#maximum-likelihood-estimation"><i class="fa fa-check"></i><b>8.6.3</b> Maximum likelihood estimation</a></li>
<li class="chapter" data-level="8.6.4" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#partial-likelihood-estimation"><i class="fa fa-check"></i><b>8.6.4</b> Partial likelihood estimation</a></li>
<li class="chapter" data-level="8.6.5" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#dependence-among-the-observations"><i class="fa fa-check"></i><b>8.6.5</b> Dependence among the observations</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#tied-or-discrete-data-analysis"><i class="fa fa-check"></i><b>8.7</b> Tied or Discrete Data Analysis</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#example-recidivism-in-the-u.s."><i class="fa fa-check"></i><b>8.7.1</b> Example: Recidivism in the U.S.</a></li>
<li class="chapter" data-level="8.7.2" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#data-management"><i class="fa fa-check"></i><b>8.7.2</b> Data management</a></li>
<li class="chapter" data-level="8.7.3" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#the-treatment-of-ties"><i class="fa fa-check"></i><b>8.7.3</b> The treatment of ties</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#the-discrete-method"><i class="fa fa-check"></i><b>8.8</b> The discrete method</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="more-topics-on-survival-models.html"><a href="more-topics-on-survival-models.html#continuous-and-discrete-models"><i class="fa fa-check"></i><b>8.8.1</b> Continuous and Discrete Models</a></li>
<li><a href="more-topics-on-survival-models.html#interval-censoring" id="toc-interval-censoring"><span class="toc-section-number">8.8.2</span> Interval censoring<br />
</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="add-health-project.html"><a href="add-health-project.html"><i class="fa fa-check"></i><b>9</b> Add Health Project</a>
<ul>
<li class="chapter" data-level="9.1" data-path="add-health-project.html"><a href="add-health-project.html#library"><i class="fa fa-check"></i><b>9.1</b> Library</a></li>
<li class="chapter" data-level="9.2" data-path="add-health-project.html"><a href="add-health-project.html#access-datasets"><i class="fa fa-check"></i><b>9.2</b> Access datasets</a></li>
<li class="chapter" data-level="9.3" data-path="add-health-project.html"><a href="add-health-project.html#load-5-wave-sample"><i class="fa fa-check"></i><b>9.3</b> Load 5-wave sample</a></li>
<li class="chapter" data-level="9.4" data-path="add-health-project.html"><a href="add-health-project.html#long-form-dataset-wave-person"><i class="fa fa-check"></i><b>9.4</b> Long-form dataset (wave-person)</a></li>
<li class="chapter" data-level="9.5" data-path="add-health-project.html"><a href="add-health-project.html#exploring-variables-in-add-health"><i class="fa fa-check"></i><b>9.5</b> Exploring variables in Add Health</a></li>
<li class="chapter" data-level="9.6" data-path="add-health-project.html"><a href="add-health-project.html#outcomes-exposures-and-confounders"><i class="fa fa-check"></i><b>9.6</b> Outcomes, exposures, and confounders</a></li>
<li class="chapter" data-level="9.7" data-path="add-health-project.html"><a href="add-health-project.html#demographic-variables---time-invariant"><i class="fa fa-check"></i><b>9.7</b> Demographic variables - time-invariant</a></li>
<li class="chapter" data-level="9.8" data-path="add-health-project.html"><a href="add-health-project.html#merging-datasets-1"><i class="fa fa-check"></i><b>9.8</b> Merging datasets</a></li>
<li class="chapter" data-level="9.9" data-path="add-health-project.html"><a href="add-health-project.html#data-management-recoding-and-so-on"><i class="fa fa-check"></i><b>9.9</b> Data management, recoding, and so on</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="add-health-project.html"><a href="add-health-project.html#bmi"><i class="fa fa-check"></i><b>9.9.1</b> BMI</a></li>
<li class="chapter" data-level="9.9.2" data-path="add-health-project.html"><a href="add-health-project.html#sampling-weights"><i class="fa fa-check"></i><b>9.9.2</b> Sampling weights</a></li>
<li class="chapter" data-level="9.9.3" data-path="add-health-project.html"><a href="add-health-project.html#multiple-imputation"><i class="fa fa-check"></i><b>9.9.3</b> Multiple imputation</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="add-health-project.html"><a href="add-health-project.html#analytic-approach"><i class="fa fa-check"></i><b>9.10</b> Analytic approach</a>
<ul>
<li class="chapter" data-level="9.10.1" data-path="add-health-project.html"><a href="add-health-project.html#a-linear-regression-with-the-current-dataset"><i class="fa fa-check"></i><b>9.10.1</b> A linear regression with the current dataset</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">SOC6280: Survival Analysis: Practice</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="add-health-project" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapter 9</span> Add Health Project<a href="add-health-project.html#add-health-project" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="library" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Library<a href="add-health-project.html#library" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="add-health-project.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb255-2"><a href="add-health-project.html#cb255-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb255-3"><a href="add-health-project.html#cb255-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span></code></pre></div>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;Matrix&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:tidyr&#39;:
## 
##     expand, pack, unpack</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="add-health-project.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Matrix)</span></code></pre></div>
</div>
<div id="access-datasets" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Access datasets<a href="add-health-project.html#access-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s use the public datasets available at <a href="https://www.icpsr.umich.edu/web/ICPSR/studies/21600?archive=ICPSR&amp;q=21600" class="uri">https://www.icpsr.umich.edu/web/ICPSR/studies/21600?archive=ICPSR&amp;q=21600</a></p>
</div>
<div id="load-5-wave-sample" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Load 5-wave sample<a href="add-health-project.html#load-5-wave-sample" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, each RDA dataset will be loaded and then saved as WAVE0X. After assigning a WAVE variable, we will keep the WAVE0X dataset and WX datasets only.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="add-health-project.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co">#1st wave</span></span>
<span id="cb260-2"><a href="add-health-project.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/NAS_Share/HP/AddHealthPublic/ICPSR_21600/DS0001/21600-0001-Data.rda&quot;</span>)</span>
<span id="cb260-3"><a href="add-health-project.html#cb260-3" aria-hidden="true" tabindex="-1"></a>wave01 <span class="ot">&lt;-</span> da21600<span class="fl">.0001</span></span>
<span id="cb260-4"><a href="add-health-project.html#cb260-4" aria-hidden="true" tabindex="-1"></a>wave01<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb260-5"><a href="add-health-project.html#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(da21600<span class="fl">.0001</span>)</span>
<span id="cb260-6"><a href="add-health-project.html#cb260-6" aria-hidden="true" tabindex="-1"></a>w1 <span class="ot">=</span> <span class="fu">subset</span>(wave01, <span class="at">select =</span> <span class="fu">c</span>(AID, wave))</span>
<span id="cb260-7"><a href="add-health-project.html#cb260-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-8"><a href="add-health-project.html#cb260-8" aria-hidden="true" tabindex="-1"></a><span class="co">#2nd wave</span></span>
<span id="cb260-9"><a href="add-health-project.html#cb260-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/NAS_Share/HP/AddHealthPublic/ICPSR_21600/DS0005/21600-0005-Data.rda&quot;</span>)</span>
<span id="cb260-10"><a href="add-health-project.html#cb260-10" aria-hidden="true" tabindex="-1"></a>wave02 <span class="ot">&lt;-</span> da21600<span class="fl">.0005</span></span>
<span id="cb260-11"><a href="add-health-project.html#cb260-11" aria-hidden="true" tabindex="-1"></a>wave02<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb260-12"><a href="add-health-project.html#cb260-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(da21600<span class="fl">.0005</span>)</span>
<span id="cb260-13"><a href="add-health-project.html#cb260-13" aria-hidden="true" tabindex="-1"></a>w2 <span class="ot">=</span> <span class="fu">subset</span>(wave02, <span class="at">select =</span> <span class="fu">c</span>(AID, wave))</span>
<span id="cb260-14"><a href="add-health-project.html#cb260-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-15"><a href="add-health-project.html#cb260-15" aria-hidden="true" tabindex="-1"></a><span class="co">#3rd wave</span></span>
<span id="cb260-16"><a href="add-health-project.html#cb260-16" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/NAS_Share/HP/AddHealthPublic/ICPSR_21600/DS0008/21600-0008-Data.rda&quot;</span>)</span>
<span id="cb260-17"><a href="add-health-project.html#cb260-17" aria-hidden="true" tabindex="-1"></a>wave03 <span class="ot">&lt;-</span> da21600<span class="fl">.0008</span></span>
<span id="cb260-18"><a href="add-health-project.html#cb260-18" aria-hidden="true" tabindex="-1"></a>wave03<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb260-19"><a href="add-health-project.html#cb260-19" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(da21600<span class="fl">.0008</span>)</span>
<span id="cb260-20"><a href="add-health-project.html#cb260-20" aria-hidden="true" tabindex="-1"></a>w3 <span class="ot">=</span> <span class="fu">subset</span>(wave03, <span class="at">select =</span> <span class="fu">c</span>(AID, wave))</span>
<span id="cb260-21"><a href="add-health-project.html#cb260-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-22"><a href="add-health-project.html#cb260-22" aria-hidden="true" tabindex="-1"></a><span class="co">#4th wave</span></span>
<span id="cb260-23"><a href="add-health-project.html#cb260-23" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/NAS_Share/HP/AddHealthPublic/ICPSR_21600/DS0022/21600-0022-Data.rda&quot;</span>)</span>
<span id="cb260-24"><a href="add-health-project.html#cb260-24" aria-hidden="true" tabindex="-1"></a>wave04 <span class="ot">&lt;-</span> da21600<span class="fl">.0022</span></span>
<span id="cb260-25"><a href="add-health-project.html#cb260-25" aria-hidden="true" tabindex="-1"></a>wave04<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb260-26"><a href="add-health-project.html#cb260-26" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(da21600<span class="fl">.0022</span>)</span>
<span id="cb260-27"><a href="add-health-project.html#cb260-27" aria-hidden="true" tabindex="-1"></a>w4 <span class="ot">=</span> <span class="fu">subset</span>(wave04, <span class="at">select =</span> <span class="fu">c</span>(AID, wave))</span>
<span id="cb260-28"><a href="add-health-project.html#cb260-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-29"><a href="add-health-project.html#cb260-29" aria-hidden="true" tabindex="-1"></a><span class="co"># 5th wave</span></span>
<span id="cb260-30"><a href="add-health-project.html#cb260-30" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;~/NAS_Share/HP/AddHealthPublic/ICPSR_21600/DS0032/21600-0032-Data.rda&quot;</span>)</span>
<span id="cb260-31"><a href="add-health-project.html#cb260-31" aria-hidden="true" tabindex="-1"></a>wave05 <span class="ot">&lt;-</span> da21600<span class="fl">.0032</span></span>
<span id="cb260-32"><a href="add-health-project.html#cb260-32" aria-hidden="true" tabindex="-1"></a>wave05<span class="sc">$</span>wave <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb260-33"><a href="add-health-project.html#cb260-33" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(da21600<span class="fl">.0032</span>)</span>
<span id="cb260-34"><a href="add-health-project.html#cb260-34" aria-hidden="true" tabindex="-1"></a>w5 <span class="ot">=</span> <span class="fu">subset</span>(wave05, <span class="at">select =</span> <span class="fu">c</span>(AID, wave))</span></code></pre></div>
<p>The complete list of respondents can be obtained by aggregating all WX datasets and then getting the unique AID.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="add-health-project.html#cb261-1" aria-hidden="true" tabindex="-1"></a>aaa <span class="ot">&lt;-</span> <span class="fu">rbind</span>(w1, w2, w3, w4, w5)</span></code></pre></div>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="add-health-project.html#cb262-1" aria-hidden="true" tabindex="-1"></a>AH01 <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">subset</span>(<span class="fu">rbind</span>(w1, w2, w3, w4, w5), <span class="at">select =</span> <span class="fu">c</span>(AID)))</span></code></pre></div>
<p>It looks like the first wave contains all respondents - no addtional respondents were added.</p>
<p>To check this observation, we will see both AID from the first wave and All matched.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="add-health-project.html#cb263-1" aria-hidden="true" tabindex="-1"></a>test01 <span class="ot">&lt;-</span> <span class="fu">cbind</span>(wave01, AH01, <span class="at">by=</span><span class="st">&quot;AID&quot;</span>)</span></code></pre></div>
<p>Because the n didn’t change, we confirmed that WAVE01 contains all respondents of the study.</p>
</div>
<div id="long-form-dataset-wave-person" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Long-form dataset (wave-person)<a href="add-health-project.html#long-form-dataset-wave-person" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Aggregating WX datasets will generate a long-form dataset per wave-person.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="add-health-project.html#cb264-1" aria-hidden="true" tabindex="-1"></a>lf01 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(w1, w2, w3, w4, w5)</span>
<span id="cb264-2"><a href="add-health-project.html#cb264-2" aria-hidden="true" tabindex="-1"></a>lf <span class="ot">&lt;-</span> lf01[<span class="fu">order</span>(lf01<span class="sc">$</span>AID, lf01<span class="sc">$</span>wave), ]</span>
<span id="cb264-3"><a href="add-health-project.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 6504, 4834, 4882, 5114, 4196, 25530</span></span></code></pre></div>
<p>We will save LF for the later use.</p>
</div>
<div id="exploring-variables-in-add-health" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Exploring variables in Add Health<a href="add-health-project.html#exploring-variables-in-add-health" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use “Variables” or other documentations at <a href="https://www.icpsr.umich.edu/web/ICPSR/studies/21600?archive=ICPSR&amp;q=21600" class="uri">https://www.icpsr.umich.edu/web/ICPSR/studies/21600?archive=ICPSR&amp;q=21600</a></p>
</div>
<div id="outcomes-exposures-and-confounders" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Outcomes, exposures, and confounders<a href="add-health-project.html#outcomes-exposures-and-confounders" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s assume we are interested in the BMI trajectory, which calculation requires both weight and height in each wave. We also keep and rename exposures and confounders. This process requires getting back and force to add, rename, and remove a set of variables. To note, whenever keeping variables in your datasets, add AID and wave as default variables.</p>
<p>It is a good practice to keep the variable names consistent - for example, variables for adolescence will have “a_”, while those for adolescence’s parents will have “p_”, and those of adolescence’s offspring will have “0_”. By keeping all variable selection in one place, you can minimize any confusions in managing variables later.</p>
<p>So, it looks like either lbs or kg, cm or inch was used for weight and height. Also, there are multiple variables for each weight or height, requiring your further study about which one is better than others.</p>
<p>Here, I will simply go with the following variables, using BMI formula at <a href="https://www.cdc.gov/healthyweight/assessing/bmi/childrens_BMI/childrens_BMI_formula.html#" class="uri">https://www.cdc.gov/healthyweight/assessing/bmi/childrens_BMI/childrens_BMI_formula.html#</a>:~:text=The%20formula%20for%20BMI%20is,to%20convert%20this%20to%20meters.&amp;text=When%20using%20English%20measurements%2C%20pounds,2%20to%20kg%2Fm2.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="add-health-project.html#cb265-1" aria-hidden="true" tabindex="-1"></a>bmiwgt1 <span class="ot">&lt;-</span> wave01 <span class="sc">%&gt;%</span></span>
<span id="cb265-2"><a href="add-health-project.html#cb265-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb265-3"><a href="add-health-project.html#cb265-3" aria-hidden="true" tabindex="-1"></a>         wave,</span>
<span id="cb265-4"><a href="add-health-project.html#cb265-4" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb265-5"><a href="add-health-project.html#cb265-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_srh&quot;</span> <span class="ot">=</span> H1GH1,</span>
<span id="cb265-6"><a href="add-health-project.html#cb265-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb265-7"><a href="add-health-project.html#cb265-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_wgt_lbs&quot;</span> <span class="ot">=</span> H1GH60,</span>
<span id="cb265-8"><a href="add-health-project.html#cb265-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_ft&quot;</span> <span class="ot">=</span> H1GH59A,</span>
<span id="cb265-9"><a href="add-health-project.html#cb265-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_in&quot;</span> <span class="ot">=</span> H1GH59B,</span>
<span id="cb265-10"><a href="add-health-project.html#cb265-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_weightimage&quot;</span> <span class="ot">=</span> H1GH28,</span>
<span id="cb265-11"><a href="add-health-project.html#cb265-11" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb265-12"><a href="add-health-project.html#cb265-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_poorappetite&quot;</span> <span class="ot">=</span> H1FS2)</span>
<span id="cb265-13"><a href="add-health-project.html#cb265-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-14"><a href="add-health-project.html#cb265-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bmiwgt1)</span></code></pre></div>
<pre><code>##        AID            wave                 a_srh        a_wgt_lbs    
##  57100270:   1   Min.   :1   (1) (1) Excellent:1847   Min.   : 50.0  
##  57101310:   1   1st Qu.:1   (2) (2) Very good:2608   1st Qu.:118.0  
##  57103171:   1   Median :1   (3) (3) Good     :1605   Median :135.0  
##  57103869:   1   Mean   :1   (4) (4) Fair     : 408   Mean   :141.1  
##  57104553:   1   3rd Qu.:1   (5) (5) Poor     :  28   3rd Qu.:160.0  
##  57104649:   1   Max.   :1   NA&#39;s             :   8   Max.   :360.0  
##  (Other) :6498                                        NA&#39;s   :156    
##            a_hgt_ft                 a_hgt_in   
##  (4) (4) 4 feet: 214   (04) (4) 4 inches: 693  
##  (5) (5) 5 feet:5448   (06) (6) 6 inches: 669  
##  (6) (6) 6 feet: 758   (03) (3) 3 inches: 629  
##  NA&#39;s          :  84   (02) (2) 2 inches: 569  
##                        (05) (5) 5 inches: 562  
##                        (Other)          :3287  
##                        NA&#39;s             :  95  
##                         a_weightimage                       a_poorappetite
##  (1) (1) Very underweight      : 128   (0) (0) Never/rarely        :4192  
##  (2) (2) Slightly underweight  : 935   (1) (1) Sometimes           :1744  
##  (3) (3) About the right weight:3381   (2) (2) A lot of the time   : 410  
##  (4) (4) Slightly overweight   :1808   (3) (3) Most/all of the time: 141  
##  (5) (5) Very overweight       : 238   NA&#39;s                        :  17  
##  NA&#39;s                          :  14                                      
## </code></pre>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="add-health-project.html#cb267-1" aria-hidden="true" tabindex="-1"></a>bmiwgt2 <span class="ot">&lt;-</span> wave02 <span class="sc">%&gt;%</span></span>
<span id="cb267-2"><a href="add-health-project.html#cb267-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb267-3"><a href="add-health-project.html#cb267-3" aria-hidden="true" tabindex="-1"></a>         wave,</span>
<span id="cb267-4"><a href="add-health-project.html#cb267-4" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb267-5"><a href="add-health-project.html#cb267-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_srh&quot;</span> <span class="ot">=</span> H2GH1,</span>
<span id="cb267-6"><a href="add-health-project.html#cb267-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb267-7"><a href="add-health-project.html#cb267-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_wgt_lbs&quot;</span> <span class="ot">=</span> H2GH53,</span>
<span id="cb267-8"><a href="add-health-project.html#cb267-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_ft&quot;</span> <span class="ot">=</span> H2WS16HF,</span>
<span id="cb267-9"><a href="add-health-project.html#cb267-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_in&quot;</span> <span class="ot">=</span> H2WS16HI,</span>
<span id="cb267-10"><a href="add-health-project.html#cb267-10" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_weightimage&quot;</span> <span class="ot">=</span> H2GH30,</span>
<span id="cb267-11"><a href="add-health-project.html#cb267-11" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb267-12"><a href="add-health-project.html#cb267-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_poorappetite&quot;</span> <span class="ot">=</span> H2GH22)</span>
<span id="cb267-13"><a href="add-health-project.html#cb267-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-14"><a href="add-health-project.html#cb267-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bmiwgt2)</span></code></pre></div>
<pre><code>##        AID            wave                 a_srh        a_wgt_lbs    
##  57101310:   1   Min.   :2   (1) (1) Excellent:1434   Min.   : 60.0  
##  57103869:   1   1st Qu.:2   (2) (2) Very good:1923   1st Qu.:120.0  
##  57104649:   1   Median :2   (3) (3) Good     :1179   Median :140.0  
##  57104676:   1   Mean   :2   (4) (4) Fair     : 286   Mean   :145.7  
##  57109625:   1   3rd Qu.:2   (5) (5) Poor     :  10   3rd Qu.:163.0  
##  57110897:   1   Max.   :2   NA&#39;s             :   2   Max.   :350.0  
##  (Other) :4828                                        NA&#39;s   :86     
##            a_hgt_ft                 a_hgt_in   
##  (4) (4) 4 feet:  88   (06) (6) 6 inches: 537  
##  (5) (5) 5 feet:4077   (05) (5) 5 inches: 462  
##  (6) (6) 6 feet: 638   (04) (4) 4 inches: 461  
##  NA&#39;s          :  31   (07) (7) 7 inches: 459  
##                        (02) (2) 2 inches: 415  
##                        (Other)          :2469  
##                        NA&#39;s             :  31  
##                         a_weightimage                    a_poorappetite
##  (1) (1) Very underweight      :  56   (0) (0) Never            :2312  
##  (2) (2) Slightly underweight  : 697   (1) (1) Just a few times :1834  
##  (3) (3) About the right weight:2576   (2) (2) About once a week: 508  
##  (4) (4) Slightly overweight   :1338   (3) (3) Almost every day : 136  
##  (5) (5) Very overweight       : 162   (4) (4) Every day        :  42  
##  NA&#39;s                          :   5   NA&#39;s                     :   2  
## </code></pre>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="add-health-project.html#cb269-1" aria-hidden="true" tabindex="-1"></a>bmiwgt3 <span class="ot">&lt;-</span> wave03 <span class="sc">%&gt;%</span></span>
<span id="cb269-2"><a href="add-health-project.html#cb269-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb269-3"><a href="add-health-project.html#cb269-3" aria-hidden="true" tabindex="-1"></a>         wave,</span>
<span id="cb269-4"><a href="add-health-project.html#cb269-4" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb269-5"><a href="add-health-project.html#cb269-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_srh&quot;</span> <span class="ot">=</span> H3GH1,</span>
<span id="cb269-6"><a href="add-health-project.html#cb269-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb269-7"><a href="add-health-project.html#cb269-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_wgt_lbs&quot;</span> <span class="ot">=</span> H3DA44,</span>
<span id="cb269-8"><a href="add-health-project.html#cb269-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_ft&quot;</span> <span class="ot">=</span> H3HGT_F,</span>
<span id="cb269-9"><a href="add-health-project.html#cb269-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_in&quot;</span> <span class="ot">=</span> H3HGT_I)</span>
<span id="cb269-10"><a href="add-health-project.html#cb269-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-11"><a href="add-health-project.html#cb269-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bmiwgt3)</span></code></pre></div>
<pre><code>##        AID            wave                 a_srh        a_wgt_lbs    
##  57100270:   1   Min.   :3   (1) (1) Excellent:1601   Min.   : 80.0  
##  57101310:   1   1st Qu.:3   (2) (2) Very good:2000   1st Qu.:136.0  
##  57103869:   1   Median :3   (3) (3) Good     :1055   Median :160.0  
##  57104676:   1   Mean   :3   (4) (4) Fair     : 206   Mean   :168.5  
##  57109625:   1   3rd Qu.:3   (5) (5) Poor     :  20   3rd Qu.:190.0  
##  57111071:   1   Max.   :3                            Max.   :430.0  
##  (Other) :4876                                        NA&#39;s   :111    
##            a_hgt_ft                 a_hgt_in   
##  (4) (4) 4 feet:  84   (04) (4) 4 inches: 470  
##  (5) (5) 5 feet:3913   (06) (6) 6 inches: 458  
##  (6) (6) 6 feet: 732   (02) (2) 2 inches: 448  
##  (7) (7) 7 feet:   1   (03) (3) 3 inches: 424  
##  NA&#39;s          : 152   (07) (7) 7 inches: 409  
##                        (Other)          :2518  
##                        NA&#39;s             : 155</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="add-health-project.html#cb271-1" aria-hidden="true" tabindex="-1"></a>bmiwgt4 <span class="ot">&lt;-</span> wave04 <span class="sc">%&gt;%</span></span>
<span id="cb271-2"><a href="add-health-project.html#cb271-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb271-3"><a href="add-health-project.html#cb271-3" aria-hidden="true" tabindex="-1"></a>         wave,</span>
<span id="cb271-4"><a href="add-health-project.html#cb271-4" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb271-5"><a href="add-health-project.html#cb271-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_srh&quot;</span> <span class="ot">=</span> H4GH1,</span>
<span id="cb271-6"><a href="add-health-project.html#cb271-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb271-7"><a href="add-health-project.html#cb271-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_wgt_lbs&quot;</span> <span class="ot">=</span> H4GH6,</span>
<span id="cb271-8"><a href="add-health-project.html#cb271-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_ft&quot;</span> <span class="ot">=</span> H4GH5F,</span>
<span id="cb271-9"><a href="add-health-project.html#cb271-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_in&quot;</span> <span class="ot">=</span> H4GH5I)</span>
<span id="cb271-10"><a href="add-health-project.html#cb271-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-11"><a href="add-health-project.html#cb271-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bmiwgt4)</span></code></pre></div>
<pre><code>##        AID            wave                 a_srh        a_wgt_lbs    
##  57101310:   1   Min.   :4   (1) (1) Excellent: 979   Min.   : 18.0  
##  57103869:   1   1st Qu.:4   (2) (2) Very good:1963   1st Qu.:150.0  
##  57109625:   1   Median :4   (3) (3) Good     :1683   Median :178.0  
##  57111071:   1   Mean   :4   (4) (4) Fair     : 434   Mean   :184.1  
##  57113943:   1   3rd Qu.:4   (5) (5) Poor     :  55   3rd Qu.:211.0  
##  57117542:   1   Max.   :4                            Max.   :525.0  
##  (Other) :5108                                        NA&#39;s   :79     
##     a_hgt_ft        a_hgt_in     
##  Min.   :4.000   Min.   : 0.000  
##  1st Qu.:5.000   1st Qu.: 2.000  
##  Median :5.000   Median : 5.000  
##  Mean   :5.172   Mean   : 5.386  
##  3rd Qu.:5.000   3rd Qu.: 8.000  
##  Max.   :6.000   Max.   :11.000  
##  NA&#39;s   :6       NA&#39;s   :10</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="add-health-project.html#cb273-1" aria-hidden="true" tabindex="-1"></a>bmiwgt5 <span class="ot">&lt;-</span> wave05 <span class="sc">%&gt;%</span></span>
<span id="cb273-2"><a href="add-health-project.html#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb273-3"><a href="add-health-project.html#cb273-3" aria-hidden="true" tabindex="-1"></a>         wave,</span>
<span id="cb273-4"><a href="add-health-project.html#cb273-4" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb273-5"><a href="add-health-project.html#cb273-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_srh&quot;</span> <span class="ot">=</span> H5ID1,</span>
<span id="cb273-6"><a href="add-health-project.html#cb273-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb273-7"><a href="add-health-project.html#cb273-7" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_wgt_lbs&quot;</span> <span class="ot">=</span> H5ID3,</span>
<span id="cb273-8"><a href="add-health-project.html#cb273-8" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_ft&quot;</span> <span class="ot">=</span> H5ID2F,</span>
<span id="cb273-9"><a href="add-health-project.html#cb273-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_hgt_in&quot;</span> <span class="ot">=</span> H5ID2I)</span>
<span id="cb273-10"><a href="add-health-project.html#cb273-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-11"><a href="add-health-project.html#cb273-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bmiwgt5)</span></code></pre></div>
<pre><code>##        AID            wave       a_srh         a_wgt_lbs        a_hgt_ft     
##  57101310:   1   Min.   :5   Min.   :1.000   Min.   :100.0   Min.   : 4.000  
##  57111071:   1   1st Qu.:5   1st Qu.:2.000   1st Qu.:155.0   1st Qu.: 5.000  
##  57111786:   1   Median :5   Median :2.000   Median :185.0   Median : 5.000  
##  57113943:   1   Mean   :5   Mean   :2.473   Mean   :192.2   Mean   : 5.379  
##  57117997:   1   3rd Qu.:5   3rd Qu.:3.000   3rd Qu.:220.0   3rd Qu.: 5.000  
##  57118381:   1   Max.   :5   Max.   :5.000   Max.   :400.0   Max.   :98.000  
##  (Other) :4190               NA&#39;s   :4       NA&#39;s   :25      NA&#39;s   :2       
##     a_hgt_in    
##  Min.   :  0.0  
##  1st Qu.:  3.0  
##  Median :  5.0  
##  Mean   : 10.6  
##  3rd Qu.:  8.0  
##  Max.   :998.0  
##  NA&#39;s   :6</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="add-health-project.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(bmiwgt5<span class="sc">$</span>a_hgt_ft)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>The “Rbind” function requires all datasets have a same numbers of columns. “setDT” and “fill=TRUE” are the functions from a “data.table” package that override this requirement.</p>
<p>Now, we have created a <em>long-form dataset (i.e., vars) from five sets of cross-sectional datasets</em>.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="add-health-project.html#cb277-1" aria-hidden="true" tabindex="-1"></a>vars01 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(<span class="fu">setDT</span>(bmiwgt1), <span class="fu">setDT</span>(bmiwgt2), <span class="fu">setDT</span>(bmiwgt3), <span class="fu">setDT</span>(bmiwgt4), <span class="fu">setDT</span>(bmiwgt5), <span class="at">fill=</span><span class="cn">TRUE</span>)</span>
<span id="cb277-2"><a href="add-health-project.html#cb277-2" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> vars01[<span class="fu">order</span>(vars01<span class="sc">$</span>AID, vars01<span class="sc">$</span>wave), ]</span>
<span id="cb277-3"><a href="add-health-project.html#cb277-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 6504, 4834, 4882, 5114, 4196, 25530</span></span></code></pre></div>
</div>
<div id="demographic-variables---time-invariant" class="section level2 hasAnchor" number="9.7">
<h2><span class="header-section-number">9.7</span> Demographic variables - time-invariant<a href="add-health-project.html#demographic-variables---time-invariant" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="add-health-project.html#cb278-1" aria-hidden="true" tabindex="-1"></a>demo_TI <span class="ot">&lt;-</span> wave01 <span class="sc">%&gt;%</span></span>
<span id="cb278-2"><a href="add-health-project.html#cb278-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(AID,</span>
<span id="cb278-3"><a href="add-health-project.html#cb278-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;a_sex&quot;</span> <span class="ot">=</span> BIO_SEX)</span></code></pre></div>
</div>
<div id="merging-datasets-1" class="section level2 hasAnchor" number="9.8">
<h2><span class="header-section-number">9.8</span> Merging datasets<a href="add-health-project.html#merging-datasets-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following code merges a long-form dataset (i.e., <em>vars</em>) and a time-invariant dataset (i.e., <em>demo_TI</em>).</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="add-health-project.html#cb279-1" aria-hidden="true" tabindex="-1"></a>Final01 <span class="ot">&lt;-</span> <span class="fu">merge</span>(vars, demo_TI, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;AID&quot;</span>))</span>
<span id="cb279-2"><a href="add-health-project.html#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Final01)</span></code></pre></div>
<pre><code>##        AID             wave                    a_srh        a_wgt_lbs    
##  57101310:    5   Min.   :1.00   (2) (2) Very good:8494   Min.   : 18.0  
##  57111071:    5   1st Qu.:1.00   (1) (1) Excellent:5861   1st Qu.:130.0  
##  57113943:    5   Median :3.00   (3) (3) Good     :5522   Median :155.0  
##  57118381:    5   Mean   :2.83   2                :1503   Mean   :164.3  
##  57118943:    5   3rd Qu.:4.00   3                :1393   3rd Qu.:190.0  
##  57121404:    5   Max.   :5.00   (Other)          :2743   Max.   :525.0  
##  (Other) :25500                  NA&#39;s             :  14   NA&#39;s   :457    
##            a_hgt_ft                  a_hgt_in    
##  (5) (5) 5 feet:13438   (06) (6) 6 inches: 1664  
##  5             : 7504   (04) (4) 4 inches: 1624  
##  (6) (6) 6 feet: 2128   (03) (3) 3 inches: 1451  
##  6             : 1664   (02) (2) 2 inches: 1432  
##  (4) (4) 4 feet:  386   (07) (7) 7 inches: 1430  
##  (Other)       :  135   (Other)          :17632  
##  NA&#39;s          :  275   NA&#39;s             :  297  
##                         a_weightimage                     a_poorappetite 
##  (1) (1) Very underweight      :  184   (0) (0) Never/rarely     : 4192  
##  (2) (2) Slightly underweight  : 1632   (0) (0) Never            : 2312  
##  (3) (3) About the right weight: 5957   (1) (1) Just a few times : 1834  
##  (4) (4) Slightly overweight   : 3146   (1) (1) Sometimes        : 1744  
##  (5) (5) Very overweight       :  400   (2) (2) About once a week:  508  
##  NA&#39;s                          :14211   (Other)                  :  729  
##                                         NA&#39;s                     :14211  
##             a_sex      
##  (1) (1) Male  :11874  
##  (2) (2) Female:13654  
##  NA&#39;s          :    2  
##                        
##                        
##                        
## </code></pre>
</div>
<div id="data-management-recoding-and-so-on" class="section level2 hasAnchor" number="9.9">
<h2><span class="header-section-number">9.9</span> Data management, recoding, and so on<a href="add-health-project.html#data-management-recoding-and-so-on" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="bmi" class="section level3 hasAnchor" number="9.9.1">
<h3><span class="header-section-number">9.9.1</span> BMI<a href="add-health-project.html#bmi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Alright, the following code does not work….</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="add-health-project.html#cb281-1" aria-hidden="true" tabindex="-1"></a>Final01<span class="sc">$</span>a_wgt_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Final01<span class="sc">$</span>a_wgt_lbs <span class="sc">&lt;</span> <span class="dv">50</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb281-2"><a href="add-health-project.html#cb281-2" aria-hidden="true" tabindex="-1"></a>Final01<span class="sc">$</span>a_wgt_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="dv">430</span> <span class="sc">&lt;</span> Final01<span class="sc">$</span>a_wgt_lbs, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb281-3"><a href="add-health-project.html#cb281-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-4"><a href="add-health-project.html#cb281-4" aria-hidden="true" tabindex="-1"></a>Final01<span class="sc">$</span>a_hgt_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">as.integer</span>(Final01<span class="sc">$</span>a_hgt_ft) <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb281-5"><a href="add-health-project.html#cb281-5" aria-hidden="true" tabindex="-1"></a>Final01<span class="sc">$</span>a_hgt_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="dv">95</span> <span class="sc">&lt;</span> <span class="fu">as.integer</span>(Final01<span class="sc">$</span>a_hgt_ft), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb281-6"><a href="add-health-project.html#cb281-6" aria-hidden="true" tabindex="-1"></a>Final01<span class="sc">$</span>a_hgt_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="dv">95</span> <span class="sc">&lt;</span> <span class="fu">as.integer</span>(Final01<span class="sc">$</span>a_hgt_in), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb281-7"><a href="add-health-project.html#cb281-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-8"><a href="add-health-project.html#cb281-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Final01)</span></code></pre></div>
<pre><code>##        AID             wave                    a_srh        a_wgt_lbs    
##  57101310:    5   Min.   :1.00   (2) (2) Very good:8494   Min.   : 18.0  
##  57111071:    5   1st Qu.:1.00   (1) (1) Excellent:5861   1st Qu.:130.0  
##  57113943:    5   Median :3.00   (3) (3) Good     :5522   Median :155.0  
##  57118381:    5   Mean   :2.83   2                :1503   Mean   :164.3  
##  57118943:    5   3rd Qu.:4.00   3                :1393   3rd Qu.:190.0  
##  57121404:    5   Max.   :5.00   (Other)          :2743   Max.   :525.0  
##  (Other) :25500                  NA&#39;s             :  14   NA&#39;s   :457    
##            a_hgt_ft                  a_hgt_in    
##  (5) (5) 5 feet:13438   (06) (6) 6 inches: 1664  
##  5             : 7504   (04) (4) 4 inches: 1624  
##  (6) (6) 6 feet: 2128   (03) (3) 3 inches: 1451  
##  6             : 1664   (02) (2) 2 inches: 1432  
##  (4) (4) 4 feet:  386   (07) (7) 7 inches: 1430  
##  (Other)       :  135   (Other)          :17632  
##  NA&#39;s          :  275   NA&#39;s             :  297  
##                         a_weightimage                     a_poorappetite 
##  (1) (1) Very underweight      :  184   (0) (0) Never/rarely     : 4192  
##  (2) (2) Slightly underweight  : 1632   (0) (0) Never            : 2312  
##  (3) (3) About the right weight: 5957   (1) (1) Just a few times : 1834  
##  (4) (4) Slightly overweight   : 3146   (1) (1) Sometimes        : 1744  
##  (5) (5) Very overweight       :  400   (2) (2) About once a week:  508  
##  NA&#39;s                          :14211   (Other)                  :  729  
##                                         NA&#39;s                     :14211  
##             a_sex         a_wgt_flag      a_hgt_flag 
##  (1) (1) Male  :11874   Min.   :0e+00   Min.   :0    
##  (2) (2) Female:13654   1st Qu.:0e+00   1st Qu.:0    
##  NA&#39;s          :    2   Median :0e+00   Median :0    
##                         Mean   :2e-04   Mean   :0    
##                         3rd Qu.:0e+00   3rd Qu.:0    
##                         Max.   :1e+00   Max.   :0    
##                         NA&#39;s   :457     NA&#39;s   :297</code></pre>
</div>
<div id="sampling-weights" class="section level3 hasAnchor" number="9.9.2">
<h3><span class="header-section-number">9.9.2</span> Sampling weights<a href="add-health-project.html#sampling-weights" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="multiple-imputation" class="section level3 hasAnchor" number="9.9.3">
<h3><span class="header-section-number">9.9.3</span> Multiple imputation<a href="add-health-project.html#multiple-imputation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="analytic-approach" class="section level2 hasAnchor" number="9.10">
<h2><span class="header-section-number">9.10</span> Analytic approach<a href="add-health-project.html#analytic-approach" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following models are demonstration only - mostly, the models themselves do not make sense.</p>
<div id="a-linear-regression-with-the-current-dataset" class="section level3 hasAnchor" number="9.10.1">
<h3><span class="header-section-number">9.10.1</span> A linear regression with the current dataset<a href="add-health-project.html#a-linear-regression-with-the-current-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="add-health-project.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lmer</span>(a_wgt_lbs <span class="sc">~</span> <span class="fu">as.numeric</span>(a_srh) <span class="sc">+</span> a_sex <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> AID), <span class="at">data=</span>Final01)</span></code></pre></div>
<pre><code>## Linear mixed model fit by REML [&#39;lmerMod&#39;]
## Formula: a_wgt_lbs ~ as.numeric(a_srh) + a_sex + (1 | AID)
##    Data: Final01
## REML criterion at convergence: 248599
## Random effects:
##  Groups   Name        Std.Dev.
##  AID      (Intercept) 33.69   
##  Residual             26.88   
## Number of obs: 25069, groups:  AID, 6492
## Fixed Effects:
##         (Intercept)    as.numeric(a_srh)  a_sex(2) (2) Female  
##             160.802                5.422              -25.999</code></pre>

</div>
</div>
</div>




















            </section>

          </div>
        </div>
      </div>
<a href="more-topics-on-survival-models.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/08-AddHealthPublic.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
